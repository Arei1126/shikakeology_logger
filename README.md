## Shikakeology Action Logger (仕掛学行動ロガー)

仕掛学（Shikakeology）に基づく行動観察を、屋外で直感的かつ高速に記録するためのフィールドワーク専用ツールです。
スマホのタッチ操作に最適化されており、画面を見ずに記録できる「No-Look UI」と、仕掛学の行動モデルに基づくデータ補完機能を搭載しています。

## 📱 デモ & インストール

以下のリンクからブラウザで開き、ホーム画面に追加することでアプリとして利用できます。

[Shikakeology Action Logger を起動する](https://arei1126.github.io/shikakeology_logger/)


## 🎓 理論的背景：関与プロセス (The Engagement Process)

本アプリは、仕掛け（Shikake）に対する人々の行動変容を、以下の4段階の**「関与の深さ（Behavioral Funnel）」**として捉え、記録します。

> 参考文献: [仕掛学研究会 論文 (PDF)](https://www.shikakeology.org/pdf/SIG-TBC-012-03.pdf)

### 行動変容の4ステップ

1. ##### 通行 (Pass) 🚶

仕掛けの設置エリアを通過したすべての人（分母）。

本アプリでは、性別ボタンを押した時点で自動的にカウントされます。

1. #### 見た (Look) 👀

歩きながら視線を向けた、あるいは存在に気づいた状態。

1. #### 止まった (Stop) 👣

足を止めて仕掛けを観察した状態。興味・関心が高まっている段階。

1. #### 使った (Use) ✋

仕掛けに物理的に接触した、または意図された行動を完遂した状態。最も深い関与。

### 階層的データ補完ロジック

本アプリは、上位の行動が記録された場合、下位の行動も「発生した」とみなしてデータを処理します。

- 例：「使った (Use)」を記録 → 自動的に「止まった」「見た」「通行した」もフラグが立ちます。

- これにより、現場では「最終的に到達した行動」だけを入力すれば良くなり、記録の負担が大幅に軽減されます。

### ✨ 主な機能 (Features)

#### 1. Quad-Split No-Look UI (4分割ノールック入力)

画面を**「左右（男女）」×「上下（個人/集団）」**の4つに分割。対象から目を離さずに、親指の位置だけで属性を選択できます。

#### 2. フリック入力 & Sonic Feedback

属性エリアを押したまま、指をスライドさせることで行動を記録します。

- ⬆ 上へ: 見た (Look)

- ➡ 外へ: 止まった (Stop)

- ⬇ 下へ: 使った (Use)

- 指を離す: 通行のみ (Pass)

操作時には「コッ」という短い効果音（Web Audio API）や振動によるフィードバックがあり、画面を見なくても入力完了がわかります。

#### 3. スマート編集機能

直近の記録をタップすることで、その場でデータの修正が可能です。

- 性別・集団属性の変更

- 行動ステータスの変更

- 記録の削除

- 個人メモの追記（特徴的な行動などをテキストで記録）

#### 4. 堅牢なCSVエクスポート

計測終了後、解析用に整形されたCSVデータを出力します。

- JST時刻: 日本時間でのタイムスタンプ

- ダミー変数: 回帰分析にそのまま使える 0 / 1 形式の列 (isMale, isGroup, Use etc.)

- 自動保存: データはブラウザ内に自動保存され、タブを閉じても消えません。

### 📲 PWAインストール方法 (推奨)

本アプリはPWA (Progressive Web App) 対応です。ホーム画面に追加することで、アドレスバーが消え、オフラインでも動作するネイティブアプリとして使用できます。

#### 🍎 iOS (iPhone/iPad) の場合

1. Safari でアプリのページを開く。

1. 画面下部（iPadは右上）の 共有アイコン (四角から矢印が出ているマーク) をタップ。

1. メニューをスクロールして 「ホーム画面に追加」 を選択。

1. 右上の 「追加」 をタップ。

#### 🤖 Android の場合

1. Chrome でアプリのページを開く。

1. 右上の メニューアイコン (︙) をタップ。

1. 「アプリをインストール」 または 「ホーム画面に追加」 を選択。

1. 確認画面で 「インストール」 (または自動的に追加) をタップ。

##### 📊 CSVデータ仕様

出力されるCSVファイルのカラム構成です。

カラム名

説明

例

ID

UUID (一意の識別子)

a1b2...

Timestamp_ISO

ISO形式の日時

2023-10-27T10:00:00.000Z

Timestamp_JST

日本時間

2023/10/27 19:00:00

UnixTime

UNIXタイムスタンプ

1698400800000

Gender

性別ラベル

Male, Female

Action_Raw

記録された生の行動

Pass, Look, Stop, Use

isGroup

集団属性ラベル

Group, Individual

isMale

男性ダミー変数 (0/1)

1

isFemale

女性ダミー変数 (0/1)

0

isGroup_Dummy

集団ダミー変数 (0/1)

0

Passing(0)

通行フラグ (常に1)

1

Look(1)

見たフラグ (Stop/Use含む)

1

Stop(2)

止まったフラグ (Use含む)

0

Use(3)

使ったフラグ

0

Note

個人メモ

赤い帽子

### 🛠️ 開発者向け情報

#### 技術スタック

- React (v18+)

- TypeScript

- Vite

- Tailwind CSS (v4)

- Lucide React (Icons)

- Web Audio API

#### ローカルでの起動方法

```bash
# 依存パッケージのインストール
npm install

# 開発サーバーの起動
npm run dev
```

### 📜 License

MIT License





## Shikakeology Action Logger (仕掛学行動ロガー)

仕掛学（Shikakeology)に基づく行動観察を、屋外で直感的かつ高速に記録するためのPWA（Progressive Web App）対応ロガーです。
スマホのタッチ操作に最適化されており、画面を見ずに記録できる「No-Look UI」と、仕掛学の行動モデルに基づくデータ補完機能を搭載しています。

## デモ (Demo)

以下のリンクから、ブラウザ上で実際に動作を試すことができます（スマホ推奨）。

[Shikakeology Action Logger を起動する](https://arei1126.github.io/shikakeology_logger/)

## 特徴 (Features)

- No-Look UI: 画面を左右（男女）に分割し、フリック方向（上・外・下）で行動を記録。対象から目を離さずに記録可能です。

- 階層的データモデル: 「使った(Use)」を記録すると、自動的に「止まった(Stop)」「見た(Look)」も記録される仕掛学ロジックを内蔵。

- CSVエクスポート: 解析用に整形されたCSVデータを出力。回帰分析用のダミー変数（isMale, isPass等）やJST時刻も自動付与されます。

- セッション履歴管理: 過去の調査データをブラウザ内に保存し、いつでも再ダウンロード可能。

- ナイトモード: 夜間調査に最適なダークテーマを搭載。

## 技術スタック

- React (v18+)

- TypeScript

- Vite

- Tailwind CSS (v4)

- Lucide React (Icons)

## ローカルでの起動方法 (Getting Started)

このリポジトリをクローンして、手元のPCで開発・実行するための手順です。
前提として Node.js (v16以上推奨) がインストールされている必要があります。

### 1. 依存パッケージのインストール

プロジェクトのルートディレクトリで以下のコマンドを実行し、必要なライブラリをインストールします。

```bash
npm install
```

### 2. 開発サーバーの起動

インストールが完了したら、開発サーバーを立ち上げます。

```bash
npm run dev
```

ターミナルに表示されるURL（通常は http://localhost:5173）をブラウザで開くとアプリが起動します。

## PWAとしての利用

スマホでデモURLを開き、ブラウザのメニューから「ホーム画面に追加」(Android(chrome系)なら「アプリをインストール」, iphone(safari)なら「共有メニュー」>「ホーム画面に追加」）を行うことで、アプリのようにフルスクリーンで使用できます。
オフライン環境でも動作するため、電波の悪い場所でのフィールドワークにも最適です。

## License

MIT License
